# PRINS
PRoject-Inference-and-Stitch (PRINS); Scalable model inference for system logs


## Paper
- Donghwan Shin, Domenico Bianculli, and Lionel Briand, "[PRINS: Scalable Model Inference for Component-based System Logs](http://arxiv.org/abs/2106.01987)", arXiv, 2021.


## Authors
- Donghwan Shin (donghwan.shin@uni.lu)
- Domenico Bianculli (domenico.bianculli@uni.lu)
- Lionel Briand (lionel.briand@uni.lu)


## Prerequisites
* python 3.7
* dot 2.x (graphviz)


## Install

Initialize python's virtual environment & install required packages:
```shell script
python3 -m venv venv
source venv/bin/activate  # venv should be activated during the execution of PRINS
pip install -r requirements.txt
```


## Run PRINS

* Input: a structured (preprocessed) log file (csv); for each log entry, the following should be provided at minimum:
  * `logID`: log id (if logs are collected for multiple executions)
  * `lineID`: line number of each log; a single log message (line) has the same id
  * `component`: component (name or id)
  * `tid`: event template id
  * `values`: runtime values for the variable parts of the template (currently not used, but even `[]` should be provided in the csv file)
* Output: a pdf file showing the system model (in the form of EFSM)
  * By default, PRINS keeps all the intermediate outputs for debugging
* Command to run:
  * `python run_PRINS.py Hadoop dataset_example/Hadoop/Hadoop_preprocessed_logs.csv`


## Detailed Parameters
```shell script
(venv) donghwan.shin@MF0032 PRINS % python run_PRINS.py -h
usage: run_PRINS.py [-h] [--output_dir OUTPUT_DIR] [--save_files]
                    [--timeout TIMEOUT] [--num_workers NUM_WORKERS]
                    [--ignore_values] [--det DET]
                    system structured_log_csv

positional arguments:
  system                System name
  structured_log_csv    Structured log file (csv) generated by LogPrep

optional arguments:
  -h, --help            show this help message and exit
  --output_dir OUTPUT_DIR
                        Output directory (default=./output/{SYSTEM})
  --save_files          Set this if you want to save result files
                        (default=True)
  --timeout TIMEOUT     MINT timeout (sec) (default=3600)
  --num_workers NUM_WORKERS
                        Number of processes in multiprocessing (default=4)
  --ignore_values       Set this if you want to ignore values (default=False)
  --det DET             (postprocessing) determinization technique
                        (default=heuristic)
```


## Licensing

PRINS is Â© 2021 University of Luxembourg and licensed under the GPLv3 license.

Please read `PRINS licensing information.txt` for details.
